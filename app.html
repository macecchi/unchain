<!DOCTYPE html>
<html>
<head>
<script type="application/javascript" src="index.js"></script>
<script>
    onload = function() {
        var window = nw.Window.get();
        
        window.on('close', function() {
            window.hide();
        });
        
        UnchainSecurity.getPin(function(err, pin) {
            var pinCodeDiv = document.getElementById('pin-code');
            pinCodeDiv.innerHTML = pin;
        });
    
        var passwordForm = document.getElementById('password-form');
        passwordForm.onsubmit = function() {
            var passwordField = document.getElementById('password');
            var newPassword = passwordField.value;
            UnchainSecurity.setPassword(newPassword, function() {
                didSetPassword();
            });
            passwordField.value = '';
            passwordField.focus();
            window.hide();
            return false;
        };
    }
</script>
</head>
<body>
    <p>Your PIN is: <div id="pin-code"></div></p>
    <form id="password-form">
        <input type="password" name="password" id="password">
        <input type="submit" value="Save">
    </form>
</body>
</html>